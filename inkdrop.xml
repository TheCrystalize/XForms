<?xml version="1.0" encoding="utf-8"?>
<user_transforms>
	<transform_def name="inkdrop">
	<!-- original transform by Jess/Far
			translated to winter by Crystalize -->
		<node name="input_params">
			<real name="inkdrop">1</real>
			<real name="R">1</real>
			<real name="X">0</real>
			<real name="Y">0</real>
		</node>

		<node name="internal_params">
			<real name="weight" />
			<real name="mr" />
			<real name="my" />
			<real name="mx" />
			<real name="rad2" />
		</node>

		<string name="winter_init_function">
			<![CDATA[
				inkdrop_init_result(inkdrop, R, Y, X, R * R)
			]]>
		</string>

		<string name="winter_eval_function">
			<![CDATA[
				let
					distx = p_in.x - mx
					disty = p_in.y - my
					dist2 = distx * distx + disty * disty
					adjust = (sqrt(dist2 + rad2) - sqrt(dist2))
					bearing = atan2(disty, distx)
				in
					vec2(p_in.x + cos(bearing) * adjust, p_in.y + sin(bearing) * adjust) * weight
			]]>
		</string>
	</transform_def>


</user_transforms>
