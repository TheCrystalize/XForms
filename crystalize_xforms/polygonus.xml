<?xml version="1.0" encoding="utf-8"?>
<user_transforms>
	<transform_def name="polygonus">
		<node name="input_params">
			<real name="polygonus">1</real>
			<real name="polygonus_SplitCenter">1</real>
			<real name="polygonus_Split">0</real>
			<real name="polygonus_N">3</real>
		</node>

		<node name="internal_params">
			<real name="scale" />
			<real name="sc" />
			<real name="oSplit" />
			<real name="iSplit" />
			<real name="Npi" />
		</node>

		<string name="winter_init_function">
			<![CDATA[
				let
					splitAm = 1.0 + polygonus_Split
				in
					polygonus_init_result(polygonus, polygonus_SplitCenter, splitAm, 1 / splitAm, twopi() / polygonus_N)
			]]>
		</string>

		<string name="winter_eval_function">
			<![CDATA[
				let
					radius = dot(p_in, p_in)
					radiusScaled = radius / sc
					angle = atan2(p_in.y, p_in.x) + pi()
					shape0 = vec2(cos(angle), sin(angle)) * cos(floor(0.5 + angle / Npi) * Npi - angle) * radiusScaled
					shape = dot(shape0, shape0)
				in
					if(radius < shape, p_in * oSplit, p_in * iSplit) * scale
			]]>
		</string>
	</transform_def>


</user_transforms>
