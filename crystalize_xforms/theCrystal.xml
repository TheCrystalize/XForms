<?xml version="1.0" encoding="utf-8"?>
<user_transforms>
	<transform_def name="theCrystal">
		<node name="input_params">
			<real name="theCrystal">1</real>
			<real name="theCrystal_iterations"minval="1"maxval="50">20</real>
			<real name="theCrystal_re">0</real>
			<real name="theCrystal_im">1</real>
		</node>

		<node name="internal_params">
			<real name="weight" />
			<real name="iters" />
			<real name="re" />
			<real name="im" />
		</node>

		<int name="num_unit_randoms">2</int>

		<string name="winter_init_function">
			<![CDATA[
				theCrystal_init_result(theCrystal, theCrystal_iterations, theCrystal_re, theCrystal_im)
			]]>
		</string>

		<string name="winter_eval_function">
			<![CDATA[
				let
					v = mat3x3(0.0, 0.0, iters,
										p_in.x, p_in.y, 0.0,
										re, im, 0.0)
					f0 = comit(v, 0)
					f = iterate(comit, v)
					r = complex(f.e0, f.e1)
				in
					toVec2(r) * weight
			]]>
		</string>
	</transform_def>


</user_transforms>
